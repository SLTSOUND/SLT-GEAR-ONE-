<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>High-Tech Audio Mixer</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="mixer-container">
        <h1>Audio Mixer Pro</h1>
        <div class="status-bar">
            <div id="midi-status" class="status-pill offline">
                <span class="status-dot"></span>
                MIDI: Not Connected
            </div>
            <div class="status-pill hint">
                <span class="status-dot pulse"></span>
                Tap “MIDI Learn” on any channel and move a hardware fader to map it.
            </div>
            <div class="midi-device-selector">
                <label for="midi-device-select">MIDI Device</label>
                <select id="midi-device-select">
                    <option value="all" selected>All devices</option>
                </select>
            </div>
        </div>
        
        <div id="permission-banner" class="permission-notice" style="display: none;">
            <!-- Permission status will be shown here -->
        </div>
        
        <div class="master-section">
            <div class="master-controls">
                <label>Master</label>
                <input type="range" id="master-volume" min="0" max="1" step="0.01" value="0.8">
                <div class="master-volume-display">0.8</div>
            </div>
            <div class="vu-meter-container">
                <div class="vu-meter" id="master-vu-left">
                    <div class="vu-meter-fill"></div>
                    <div class="vu-meter-label">L</div>
                </div>
                <div class="vu-meter" id="master-vu-right">
                    <div class="vu-meter-fill"></div>
                    <div class="vu-meter-label">R</div>
                </div>
            </div>
        </div>
        
        <div class="channels-container" id="channels-container">
            <!-- Channels will be dynamically added here -->
        </div>
        
        <div class="controls-section">
            <button id="add-channel">
                <span class="button-content">Add Channel</span>
            </button>
            <button id="add-mic-input">
                <span class="button-content">Add Microphone</span>
            </button>
            <button id="add-usb-input">
                <span class="button-content">Add USB Input</span>
            </button>
            <button id="save-config">
                <span class="button-content">Save Configuration</span>
            </button>
            <button id="load-config">
                <span class="button-content">Load Configuration</span>
            </button>
            <button id="toggle-all-channels">
                <span class="button-content">Play All</span>
            </button>
        </div>
    </div>

    <div id="device-modal" class="modal">
        <div class="modal-content">
            <h2>Select Audio Device</h2>
            <div id="device-list-status" class="permission-notice">
                <div class="loading-spinner"></div>
                Loading available devices...
            </div>
            <select id="device-select">
                <!-- Devices will be populated here -->
            </select>
            <div class="modal-buttons">
                <button id="connect-device">
                    <span class="button-content">Connect</span>
                </button>
                <button id="cancel-device">Cancel</button>
            </div>
        </div>
    </div>
    
    <script src="mixer.js"></script>
</body>
</html>